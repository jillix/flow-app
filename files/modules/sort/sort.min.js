this.init=function(c){var b=this,a;for(a in c){if(c[a].def){if(!this.query.defSort)this.query.defSort={};this.query.defSort[a]=c[a].def}var f=c[a].selector||c[a];if(typeof f=="string"){if(!this.sorting)this.sorting={};this.sorting[a]=N.dom.findOne(f,this.inst.dom);this.sorting[a]&&this.sorting[a].bind("click",function(d,a){return function(){b.obs.f("sortStart",a);b.sort(d,function(){b.obs.f("sortDone",a)})}}(a,this.sorting[a]))}}this.sort=function(d,a,b){if(!this.query.sort)this.query.sort={};var e;typeof a=="function"||!a?(e=this.query.sort[d]==1?-1:this.query.sort[d]==-1?0:1,this.query.sort[d]=e):this.query.sort[d]=e=a;e>0?this.obs.f("sortAsc",this.sorting[d]):e<0?this.obs.f("sortDesc",this.sorting[d]):e==0&&this.obs.f("noSort",this.sorting[d]);this.find(b||a)};this.query.handlers.sort=function(a){if(b.query.sort){for(var c in b.query.sort)if(b.query.sort[c]){if(!a.options.sort)a.options.sort={};a.options.sort[c]=b.query.sort[c]}b.query.sorted=1}else if(b.query.defSort)a.options.sort=b.query.defSort,b.query.sorted=1;return a}};