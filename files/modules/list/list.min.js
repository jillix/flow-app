function handleAttributes(b,a,f,d){for(var c in b.index)if(d){var e=N.dom.findOne(d,b.index[c]);e&&e.remAttr({"class":"active"})}else b.index[c].remAttr({"class":"active"});if(f){c=0;for(var g=f.length;c<g;++c)if(e=N.dom.findOne(f[c],b.inst.dom))d?(e=N.dom.findOne(d,e))&&e.remAttr({"class":"active"}):e.remAttr({"class":"active"})}d?(b=N.dom.findOne(d,a))&&b.addAttr({"class":"active"}):a.addAttr({"class":"active"})}this.init=function(b){var a=this,f=N.dom.findOne(b.list,a.inst.dom),d=N.dom.findOne(b.defTitle,a.inst.dom),c=N.dom.findOne(b.listTitle,a.inst.dom),e=b.remAttr,g=N.dom.findOne(b.emptyMsg,a.inst.dom),h=N.dom.findOne(b.loader,a.inst.dom);a.inst.obs.l("localeChange",function(){a.find()});a.obs.l("searchStart",function(a){a.addAttr({disabled:true})});a.obs.l("searchDone",function(a){a.remAttr("disabled")});if(b.empty){var i=N.dom.findOne(b.empty.selector,a.inst.dom);i&&a.inst[b.empty.view]&&i.bind(b.empty.event||"click",function(){if(b.empty.fire){a.inst[b.empty.view].obs.f(b.empty.fire,b.empty.args);for(var j in a.index)a.index[j].remAttr({"class":"active"})}})}c&&a.obs.l("setListTitle",function(a,b){if(d)d.style.display="none";if(c)c.style.display="block";if(a[b])c.innerHTML=a[b]});a.obs.l("listLoadData",function(b,c){var d={};if(b&&b._c&&c)for(var e in c)b[c[e]]&&(d[e]=b[c[e]]);a.find(d)});a.obs.l("listReset",function(f,g){if(c)c.style.display="none";if(d)d.style.display="block";f&&handleAttributes(a,f,e,b.active);g&&a.find(g)});a.obs.l("findEmpty",function(){if(g)g.style.display="block"});a.obs.l("findData",function(){if(g)g.style.display="none"});a.obs.l("itemHandler",function(c){c.bind("click",function(d){d.stopPropagation();handleAttributes(a,c,e,b.active)})});a.obs.l("findStart",function(){if(f)f.style.display="none";if(h)h.style.display="block"});a.obs.l("findDone",function(){if(f)f.style.display="block";if(h)h.style.display="none"})};