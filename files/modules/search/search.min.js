this.init=function(b){var a=this;if(b.fields)this.query.search={fields:b.fields};this.search=function(e,c){if(typeof e=="string"){var b=e.toLowerCase().replace(/[^a-z0-9\u00e4\u00f6\u00fc\u00e0\u00e1\u00e8\u00e9\u00ec\u00ed\u00f2\u00f3\u00f9\u00fa]/g," ").split(" ");a.query.search.term=[];for(var d=0,f=b.length;d<f;++d)b[d]&&a.query.search.term.push(b[d])}else a.query.search.term=e;a.find(c)};if(b.selector){var c=N.dom.findOne(b.selector,this.inst.dom);c&&c.bind("keyup",function(){a.obs.f("searchStart",c);a.search(c.value,function(){a.obs.f("searchDone",c)})})}this.query.handlers.search=function(b){if(a.query.search&&a.query.search.term&&a.query.search.term.length)b.search=[a.query.search.fields,a.query.search.term],a.query.sorted=1;return b}};