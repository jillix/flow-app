this.init=function(c){var b=this,e=this,a;for(a in c)if(c[a].query){if(!b.query.filter)b.query.filter={};b.query.filter[a]={query:c[a].query};b.query.filter[a].type=c[a].type||null;if(c[a].active)b.query.filter[a].active=1;if(c[a].selector){if(!b.filtering)b.filtering={};b.filtering[a]=N.dom.findOne(c[a].selector,b.inst.dom);b.filtering[a]&&b.filtering[a].bind(c[a].event||"click",function(a,f){return function(){b.obs.f("filterStart",f);b.filter(a,f.getAttribute("name"),f.value,function(){b.obs.f("filterDone",f)})}}(a,b.filtering[a]))}}this.filter=function(a,b,d,c){if(this.query.filter&&this.query.filter[a])b&&d&&d!="null"?(this.query.filter[a].type=="int"&&(d=parseInt(d,10)),this.query.filter[a].type=="float"&&(d=parseFloat(d,10)),this.query.filter[a].query[b]=d,this.query.filter[a].active=1,this.obs.f("filterActive",this.filtering[a])):(b=this.query.filter[a].active?0:1,(this.query.filter[a].active=b)?this.obs.f("filterActive",this.filtering[a]):this.obs.f("filterInactive",this.filtering[a])),this.find(c)};this.query.handlers.filter=function(a){if(e.query.filter){for(var b in e.query.filter)if(e.query.filter[b].active)for(var c in e.query.filter[b].query)a.query[c]=e.query.filter[b].query[c];e.query.sorted=1}return a}};