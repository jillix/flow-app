{
    "appId": "00000000000000000000000000000053",
    "name": "TruckShop",
    "routes": {
        "/": "layout_shop",
        "admin": "layout_admin",
        "login": "layout_login"
    },
    "domains": [
        "truckshop.jillix.net",
        "truckshop.mono.ch"
    ],
    "publicDir": "public",
    "publicUser": 0,
    "users": [
        {
            "id": 0,
            "username": "",
            "password": "",
            "roles": [0]
        },
        {
            "id": 1,
            "username": "user",
            "password": "",
            "roles": [1]
        },
        {
            "id": 2,
            "username": "admin",
            "password": "",
            "roles": [2]
        }
    ],
    "roles": [
        {
            "id": 0,
            "name": "TruckShop Public Role"
        },
        {
            "id": 1,
            "name": "TruckShop User Role"
        },
        {
            "id": 2,
            "name": "TruckShop Admin Role"
        }
    ],
    "datasources": {
        "categoriesDS": {
            "type": "mongo",
            "db": "truckshop",
            "collection": "categories"
        },
        "articlesDS": {
            "type": "mongo",
            "db": "truckshop",
            "collection": "articles"
        },
        "cartDS": {
            "type": "mongo",
            "db": "truckshop",
            "collection": "carts"
        }
    },
    "miids": {

        "layout_login": {
            "module": "github/adioo/layout/v0.0.4",
            "roles": [0],
            "config": {
                "html": {
                    "type": "a",
                    "path": "html/layout_login"
                },
                "css": ["/css/bootstrap.css", "/css/font-awesome.css", "/css/overwrite.css", "/css/bootstrap-responsive.css"],
                "title": "Derendinger TruckShop",
                "modules": {
                    "loginContainer": "login"
                }
            }
        },
        "login": {
            "module": "bitbucket/jillix/sag-login/v0.0.1",
            "roles": [0],
            "config": {
                "html": {
                    "type": "m",
                    "path": "login"
                },
                "successPage": "/"
            },
            "operations": {
                "login": {
                    "roles": [0],
                    "params": ["truckshop"]
                }
            }
        },



        "layout_shop": {
            "module": "github/adioo/layout/v0.0.4",
            "roles": [0, 1, 2],
            "config": {
                "html": {
                    "type": "a",
                    "path": "html/layout_shop"
                },
                "css": ["/css/bootstrap.css", "/css/font-awesome.css", "/css/overwrite.css", "/css/bootstrap-responsive.css"],
                "title": "Derendinger TruckShop",
                "modules": {
                    "filterContainer": "filters",
                    "sideNavContainer": "categories",
                    "articleContainer": "articles",
                    "detailContainer": "details",
                    "cartContainer": "cart"
                },
                "scripts": [
                    "/js/bootstrap-collapse.js"
                ]
            }
        },
        "filters": {
            "module": "github/jillix/filters/v0.0.1",
            "roles": [0, 1, 2],
            "config": {
                "html": {
                    "type": "a",
                    "path": "html/filters"
                },
                "listen": {
                    "categories": {
                        "selectionChanged": [
                            { "handler": "mergeCategoryFilter" }
                        ]
                    }
                }
            }
        },
        "categories": {
            "module": "github/adioo/bind-list/v0.1.1",
            "roles": [0, 1, 2],
            "config": {
                "html": {
                    "type": "a",
                    "path": "html/categories"
                },
                "template": {
                    "type": "selector",
                    "value": ".template",
                    "binds": [
                        {
                            "on": [{
                                "name": "click",
                                "handler": "selectItem"
                            }]
                        },
                        {
                            "attr": [
                                {
                                    "name": "id",
                                    "value": {
                                        "source": "id"
                                    }
                                }
                            ]
                        },
                        {
                            "target": ".text",
                            "html": {
                                "source": "name"
                            },
                            "attr": [
                                {
                                    "name": "href",
                                    "value": {
                                        "source": "id"
                                    }
                                }
                            ]
                        }
                    ]
                },
                "container": ".categories",
                "options": {
                    "autofetch": true,
                    "sort": { "pos": 1 },
                    "selection": "single",
                    "classes": {
                        "selected": "active"
                    }
                }
            },
            "operations": {
                "read": {
                    "roles": [0, 1, 2],
                    "params": [{ "ds": "categoriesDS" }, { "ds": "categoriesDS" }, { "ds": "categoriesDS" }]
                }
            }
        },
        "articles": {
            "module": "github/adioo/bind-list/v0.1.1",
            "roles": [0, 1, 2],
            "config": {
                "html": {
                    "type": "a",
                    "path": "html/articles"
                },
                "template": {
                    "type": "selector",
                    "value": ".template",
                    "binds": [
                        {
                            "on": [{
                                "name": "click",
                                "handler": "hide",
                                "emit": "viewArticleDetails"
                            }]
                        },
                        {
                            "attr": [
                                {
                                    "name": "id",
                                    "value": {
                                        "source": "_id"
                                    }
                                }
                            ]
                        },
                        {
                            "target": ".description",
                            "html": {
                                "source": "description"
                            }
                        },
                        {
                            "target": ".netto",
                            "html": {
                                "source": "netto"
                            }
                        },
                        {
                            "target": ".brutto",
                            "html": {
                                "source": "brutto"
                            }
                        },
                        {
                            "target": ".caption",
                            "html": {
                                "source": "name"
                            }
                        }
                    ]
                },
                "container": ".articles",
                "options": {
                    "selection": "none"
                },
                "listen": {
                    "filters": {
                        "filterChanged": [
                            { "handler": "show" },
                            { "handler": "read" }
                        ]
                    },
                    "details": {
                        "backToArticleList": [
                            { "handler": "show" }
                        ]
                    }
                }
            },
            "operations": {
                "read": {
                    "roles": [0, 1, 2],
                    "params": [{ "ds": "articlesDS" }, { "ds": "articlesDS" }, { "ds": "articlesDS" }]
                }
            }
        },
        "details": {
            "module": "github/adioo/bind-html/v0.1.0",
            "roles": [0, 1, 2],
            "config": {
                "html": {
                    "type": "a",
                    "path": "html/details"
                },
                "scripts": [
                    "/js/bootstrap-carousel.js"
                ],
                "binds": [
                    {
                        "target": ".back",
                        "on": [{
                            "name": "click",
                            "handler": "hide",
                            "emit": "backToArticleList"
                        }]
                    },
                    {
                        "target": ".addToCart",
                        "on": [{
                            "name": "click",
                            "emit": "addToCart"
                        }]
                    },
                    {
                        "target": ".description",
                        "html": {
                            "source": "description"
                        }
                    },
                    {
                        "target": ".netto",
                        "html": {
                            "source": "netto"
                        }
                    },
                    {
                        "target": ".brutto",
                        "html": {
                            "source": "brutto"
                        }
                    },
                    {
                        "target": ".caption",
                        "html": {
                            "source": "name"
                        }
                    }
                ],
                "listen": {
                    "articles": {
                        "viewArticleDetails": [
                            { "handler": "show" },
                            { "handler": "update" }
                        ]
                    },
                    "filters": {
                        "filterChanged": [
                            { "handler": "hide" }
                        ]
                    }
                }
            }
        },
        "cart": {
            "module": "github/adioo/bind-cart/v0.0.2",
            "roles": [1],
            "config": {
                "html": {
                    "type": "a",
                    "path": "html/cart"
                },
                "template": {
                    "type": "selector",
                    "value": ".template",
                    "binds": [
                        {
                           "target": ".close",
                            "on": [{
                                "name": "click",
                                "handler": "removeItem"
                            }]
                        },
                        {
                            "attr": [
                                {
                                    "name": "id",
                                    "value": {
                                        "source": "_id"
                                    }
                                }
                            ]
                        },
                        {
                            "target": ".netto",
                            "html": {
                                "source": "netto"
                            }
                        },
                        {
                            "target": ".caption",
                            "html": {
                                "source": "name"
                            }
                        }
                    ]
                },
                "container": ".cartList",
                "agree": ".agb",
                "options": {
                    "type": "server",
                    "possible_types": ["memory", "cookie", "server"],
                    "classes": {
                        "empty": "empty",
                        "content": "content",
                        "confitm": "confirm"
                    }
                },
                "listen": {
                    "details": {
                        "addToCart": [
                            { "handler": "addItem" }
                        ]
                    }
                },
                "binds": [
                    {
                        "target": "#order",
                        "on": [{
                            "name": "click",
                            "handler": "checkout"
                        }]
                    }
                ],
                "scripts": [
                    "/jquery.cookie.js"
                ]
            },
            "operations": {
                "create": {
                    "roles": [1],
                    "params": [{ "ds": "cartDS" }]
                },
                "read": {
                    "roles": [1],
                    "params": [{ "ds": "cartDS" }]
                },
                "update": {
                    "roles": [1],
                    "params": [{ "ds": "cartDS" }]
                },
                "remove": {
                    "roles": [1],
                    "params": [{ "ds": "cartDS" }]
                },
                "checkout": {
                    "roles": [1],
                    "params": [{ "ds": "cartDS" }]
                }
            }
        },



        "layout_admin": {
            "module": "github/adioo/layout/v0.0.4",
            "roles": [2],
            "config": {
                "html": {
                    "type": "a",
                    "path": "html/layout_admin"
                },
                "css": ["/css/bootstrap.css", "/css/font-awesome.css", "/css/overwrite.css", "/css/bootstrap-responsive.css"],
                "title": "Derendinger TruckShop",
                "modules": {
                    "filterContainer": "filters_admin",
                    "sideNavContainer": "categories_admin",
                    "articleContainer": "articles_admin",
                    "detailContainer": "details_admin",
                    "modalContainer": "edit_modal"
                },
                "scripts": [
                    "/js/bootstrap-modal.js"
                ]
            }
        },
        "filters_admin": {
            "module": "github/jillix/filters/v0.0.1",
            "roles": [2],
            "config": {
                "html": {
                    "type": "a",
                    "path": "html/filters"
                },
                "listen": {
                    "categories_admin": {
                        "selectionChanged": [
                            { "handler": "mergeCategoryFilter" }
                        ]
                    }
                }
            }
        },
        "categories_admin": {
            "module": "github/adioo/bind-list/v0.1.1",
            "roles": [2],
            "config": {
                "html": {
                    "type": "a",
                    "path": "html/categories_admin"
                },
                "template": {
                    "type": "selector",
                    "value": ".template",
                    "binds": [
                        {
                            "on": [{
                                "name": "click",
                                "handler": "selectItem"
                            }]
                        },
                        {
                            "attr": [
                                {
                                    "name": "id",
                                    "value": {
                                        "source": "id"
                                    }
                                }
                            ]
                        },
                        {
                            "target": ".text",
                            "html": {
                                "source": "name"
                            },
                            "attr": [
                                {
                                    "name": "href",
                                    "value": {
                                        "source": "id"
                                    }
                                }
                            ]
                        },
                        {
                            "target": ".edit",
                            "on": [{
                                "name": "click",
                                "emit": "requestEditItem"
                            }]
                        },
                        {
                            "target": ".delete",
                            "on": [{
                                "name": "click",
                                "handler": "removeItem"
                            }]
                        }
                    ]
                },
                "container": ".adminCategories",
                "options": {
                    "autofetch": true,
                    "sort": { "pos": 1 },
                    "selection": "single",
                    "classes": {
                        "selected": "active"
                    }
                },
                "controls": {
                    "add": ".create",
                    "delete": ".delete"
                }
            },
            "operations": {
                "create": {
                    "roles": [2],
                    "params": [{ "ds": "categoriesDS" }]
                },
                "read": {
                    "roles": [2],
                    "params": [{ "ds": "categoriesDS" }]
                },
                "update": {
                    "roles": [2],
                    "params": [{ "ds": "categoriesDS" }]
                },
                "remove": {
                    "roles": [2],
                    "params": [{ "ds": "categoriesDS" }]
                }
            }
        },
        "articles_admin": {
            "module": "github/adioo/bind-list/v0.1.1",
            "roles": [2],
            "config": {
                "html": {
                    "type": "a",
                    "path": "html/articles_admin"
                },
                "template": {
                    "type": "selector",
                    "value": ".template",
                    "binds": [
                        {
                            "on": [{
                                "name": "click",
                                "handler": "hide",
                                "emit": "viewArticleDetails"
                            }]
                        },
                        {
                            "attr": [
                                {
                                    "name": "id",
                                    "value": {
                                        "source": "_id"
                                    }
                                }
                            ]
                        },
                        {
                            "target": ".art-nr",
                            "html": {
                                "source": "nr"
                            }
                        },
                        {
                            "target": ".art-caption",
                            "html": {
                                "source": "name"
                            }
                        },
                        {
                            "target": ".art-visible",
                            "html": {
                                "source": "visible"
                            }
                        },
                        {
                            "target": ".edit",
                            "on": [{
                                "name": "click",
                                "emit": "requestEditItem"
                            }]
                        },
                        {
                            "target": ".delete",
                            "on": [{
                                "name": "click",
                                "handler": "removeItem"
                            }]
                        }
                    ]
                },
                "container": ".articles",
                "options": {
                    "selection": "none"
                },
                "listen": {
                    "filters_admin": {
                        "filterChanged": [
                            { "handler": "show" },
                            { "handler": "read" }
                        ]
                    },
                    "details_admin": {
                        "backToArticleList": [
                            { "handler": "show" }
                        ]
                    }
                },
                "controls": {
                    "add": ".create",
                    "delete": ".delete"
                }
            },
            "operations": {
                "create": {
                    "roles": [2],
                    "params": [{ "ds": "articlesDS" }]
                },
                "read": {
                    "roles": [2],
                    "params": [{ "ds": "articlesDS" }]
                },
                "update": {
                    "roles": [2],
                    "params": [{ "ds": "articlesDS" }]
                },
                "remove": {
                    "roles": [2],
                    "params": [{ "ds": "articlesDS" }]
                }
            }
        },
        "details_admin": {
            "module": "github/adioo/bind-html/v0.1.0",
            "roles": [2],
            "config": {
                "html": {
                    "type": "a",
                    "path": "html/details_admin"
                },
                "binds": [
                    {
                        "target": ".back",
                        "on": [{
                            "name": "click",
                            "handler": "hide",
                            "emit": "backToArticleList"
                        }]
                    },
                    {
                        "target": ".addToCart",
                        "on": [{
                            "name": "click",
                            "emit": "addToCart"
                        }]
                    },
                    {
                        "target": ".edit",
                        "on": [{
                            "name": "click",
                            "emit": "requestEditItem"
                        }]
                    },
                    {
                        "target": ".description",
                        "html": {
                            "source": "description"
                        }
                    },
                    {
                        "target": ".netto",
                        "html": {
                            "source": "netto"
                        }
                    },
                    {
                        "target": ".brutto",
                        "html": {
                            "source": "brutto"
                        }
                    },
                    {
                        "target": ".caption",
                        "html": {
                            "source": "name"
                        }
                    }
                ],
                "listen": {
                    "articles_admin": {
                        "viewArticleDetails": [
                            { "handler": "show" },
                            { "handler": "update" }
                        ]
                    },
                    "filters_admin": {
                        "filterChanged": [
                            { "handler": "hide" }
                        ]
                    }
                }
            }
        },
        "edit_modal": {
            "module": "bitbucket/jillix/sag-modal/v0.0.1",
            "roles": [2],
            "config": {
                "html": {
                    "type": "a",
                    "path": "html/edit_dialog"
                },
                "scripts": [
                    "/js/bootstrap-collapse.js"
                ],
                "views": {
                    "categories": {
                        "title": "Add/Edit Category",
                        "html": "html/category_form",
                        "binds": [
                        ]
                    },
                    "articles": {
                        "title": "Add/Edit Article",
                        "html": "html/article_form",
                        "binds": [
                        ]
                    }
                },
                "binds": [
                ],
                "listen": {
                    "categories_admin": {
                        "requestNewItem": [
                            { "handler": { "name": "show", "args": ["categories"] } }
                        ],
                        "requestEditItem": [
                            { "handler": { "name": "show", "args": ["categories"] } }
                        ]
                    },
                    "articles_admin": {
                        "requestNewItem": [
                            { "handler": { "name": "show", "args": ["articles"] } }
                        ],
                        "requestEditItem": [
                            { "handler": { "name": "show", "args": ["articles"] } }
                        ]
                    },
                    "details_admin": {
                        "requestEditItem": [
                            { "handler": { "name": "show", "args": ["articles"] } }
                        ]
                    }
                }
            },
            "operations": {
                "view": {
                    "roles": [2],
                    "params": []
                }
            }
        }
    }
}

